# Обновление цен и товаров на сайте [sksbrest](https://sksbrest.by/)
## Начало работы
### Установка NodeJS
- Скачать и установить на компьютер [nodejs](https://nodejs.org/en/)
### Конвертация файла PRICAT/PROCAT
- Открыть данный проект в терминале и выполнить следующую команду
  - `npm install`
- Для отображения корректных цен, необходимо в файле `utils/currencyConvertor.ts` в переменной `rusToBel` указать текущий курс Российского рубля к Белорусскому (количество Белорусских рублей за 100 Российских рублей)  
- После этого поместить необходимый файл формата xml в папку `input` и выполнить команду
  - `npm start`
- Полученный результат находится в папке `output`
### Импорт цен
- Зайти на сайт https://sksbrest.by/wp-admin/
- В панели администратора (слева), выбрать пункт инструменты - импорт
- Из предложенных вариантов выберите `WebToffee WooCommerce Product Import (CSV)` (кнопка запустить импорт)
- В окне которое отrроется необходимо загрузить файл для импорта и добавить некоторые флаги. 
![](https://i.ibb.co/fQk4brw/2022-07-06-22-01-11.png)
- В следующем окне нас интересует только 2 поля, это Product SKU и Price: Regular Price, они соответствуют SenderPrdCode и CustPrice. Далее мотаем вниз и запускаем импорт. 
![](https://i.ibb.co/fn27SyK/2022-07-06-22-05-17.png)

### Дополнительная информация
#### Скрытие товаров
Для того что бы скрыть товары используя таблицу, необходимо следующее:
- На против SenderPrdCode необходимого товара поставить Status - `draft`, и конверировать данную таблицу в CSV файл с разделителем в виде запятой(по англ. comma).
- Импортировать так же как и при обновлении цен, указав для поля Product SKU -- SenderPrdCod а для Product Status -- выбрать колонку в которой находятся слова `draft`.
- Запустить импорт.

#### Добавление новых товаров из файла
Добавление новых файлов из PROCAT является достаточно сложной работой, с большим количеством полей. По этому не рекомендуется выполнять без наличия резервных копий.
Принципиально не отличается от обновления цен, за исключением того что количество полей для импорта гораздо больше. Вам будет необходимо выбрать нужные вам поля при импорте товаров.

### Информация о сервере
Во время проведения работ были куплены дополнительные мощности, на данный момент нужно убедиться в их необходимости. Стоимость содержания сервера увеличилась.

